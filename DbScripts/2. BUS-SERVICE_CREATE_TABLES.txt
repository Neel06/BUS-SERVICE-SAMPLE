USE BUS_SERVICE;

DROP TABLE IF EXISTS PASS_APPLICATION_MASTER;
DROP TABLE IF EXISTS STUDENT_MASTER;
DROP TABLE IF EXISTS USER_MASTER;
DROP TABLE IF EXISTS USER_ROLE;
CREATE TABLE USER_ROLE(
	ROLE_ID INT PRIMARY KEY,
    USER_ROLE VARCHAR(100) NOT NULL
);


CREATE TABLE USER_MASTER(
	EMAIL VARCHAR(125) PRIMARY KEY,
    NAME VARCHAR(125) UNIQUE,
    PASSWORD VARCHAR(125),
    BIRTH_DATE DATETIME,
    ROLE_ID INT,
    FOREIGN KEY (ROLE_ID) REFERENCES USER_ROLE(ROLE_ID)
) ;


CREATE TABLE STUDENT_MASTER(
	ID INT AUTO_INCREMENT UNIQUE,
    EMAIL VARCHAR(125) UNIQUE PRIMARY KEY,
    NAME VARCHAR(125) UNIQUE KEY NOT NULL,
    STUDENT_ID VARCHAR(125) UNIQUE KEY NOT NULL,
    BIRTH_DATE DATETIME NOT NULL,
    CREATED_DATETIME DATETIME,
    CREATED_USER_ID VARCHAR(125),
    IS_ACTIVE BOOL
);

CREATE TABLE PASS_APPLICATION_MASTER (
    APPLICATION_ID INT PRIMARY KEY AUTO_INCREMENT,
    STUDENT_ID VARCHAR(125) UNIQUE NOT NULL,
    NAME VARCHAR(125) NOT NULL,
    APPLICATION_DATE DATETIME NOT NULL,
    GENDER VARCHAR(25),
    PASS_TYPE VARCHAR(100),
    IS_RURAL BOOLEAN,
    DISTRICT_PERMANANT VARCHAR(125),
    BLOCK_PERMANANT VARCHAR(125),
    CLUSTER_PERMANANT VARCHAR(125),
    VILLAGE_PERMANANT VARCHAR(125),
    DISTRICT_CURRENT VARCHAR(125),
    STATUS VARCHAR(30),
    BLOCK_CURRENT VARCHAR(125),
    CLUSTER_CURRENT VARCHAR(125),
    VILLAGE_CURRENT VARCHAR(125),
    SECTION VARCHAR(50),
    ROLL_NUMBER VARCHAR(50),
    DATE_OF_BIRTH DATE,
    CLASS VARCHAR(50),
    CLASS_GROUP VARCHAR(50),
    CATEGORY VARCHAR(50),
    SCHOOL_NAME VARCHAR(125),
    SCHOOL_ADDRESS VARCHAR(500),
    ADDRESS_PERMANANT VARCHAR(500),
    ADDRESS_CURRENT VARCHAR(500),
    SAME_AS_PERMANANT BOOLEAN,
    FROM_LOCATION VARCHAR(125),
    TO_LOCATION VARCHAR(125),
    ROUTE VARCHAR(125),
    COUNTER_NAME VARCHAR(125),
    STAGE INT,
    ACADEMIC_YEAR VARCHAR(50),
    TERM VARCHAR(50),
    TERM_FROM DATE,
    TERM_TO DATE,
    NUMBER_OF_DAYS INT,
    PASS_DURATION VARCHAR(50),
    PASS_FROM DATE,
    PASS_TO DATE,
    IS_DEPOSIT BOOLEAN,
    DEPOSIT_AMOUNT DECIMAL(10, 2),
    PASS_AMOUNT DECIMAL(10, 2),
    TOTAL_PASS_AMOUNT DECIMAL(10, 2),
    ICARD_AMOUNT DECIMAL(10, 2),
    PAYABLE_AMOUNT DECIMAL(10, 2),
    MOBILE_NUMBER VARCHAR(15),
    EMAIL VARCHAR(125),
    PAYMENT_METHOD VARCHAR(50),
    CREATED_DATETIME DATETIME,
    CREATED_USER_ID VARCHAR(125),
    UPDATED_DATETIME DATETIME,
    UPDATED_USER_ID VARCHAR(125),
    IS_ACTIVE BOOLEAN,
    FOREIGN KEY (STUDENT_ID) REFERENCES STUDENT_MASTER(STUDENT_ID)
);

